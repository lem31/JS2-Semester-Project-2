import{e as l,h as m}from"./headers-DqursC6B.js";import{d as E,o as f}from"./notFound-CbPKQgZ2.js";function p(e){const n=document.getElementById("my-profile"),t=document.createElement("h2"),i=document.createElement("p"),a=document.createElement("img"),r=document.createElement("img"),o=document.createElement("p"),s=document.createElement("div"),d=document.createElement("div"),c=document.createElement("img");return a.classList.add("banner"),r.classList.add("profile-avatar"),a.classList.add("profile-banner"),r.classList.add("profile-avatar"),t.classList.add("labels"),d.classList.add("flex-row-center"),o.classList.add("labels"),i.classList.add("body-text-mobile","md:body-text-desktop"),d.appendChild(c),d.appendChild(o),s.appendChild(a),s.appendChild(r),s.classList.add("banner-container"),n.appendChild(s),n.appendChild(t),n.appendChild(i),n.appendChild(d),c.src="/images/icons8-coins-64.png",t.innerHTML=e.name||"N/A",i.innerHTML=e.bio||"N/A",a.src=e.banner&&e.banner.url?e.banner.url:"../../../ui/images/default-banner.jpg",r.src=e.avatar&&e.avatar.url?e.avatar.url:"../../../ui/images/default-avatar.jpg",o.innerHTML=`My Credits:${e.credits}`||"N/A",n}function A(){const e=document.getElementById("update-profile-form");e.classList.contains("hidden")?(e.classList.remove("hidden"),e.classList.add("flex-row-center")):e.classList.contains("flex-row-center")&&(e.classList.remove("flex-row-center"),e.classList.add("hidden"))}function _(){document.getElementById("show-update-form-btn").addEventListener("click",A)}async function u(){const e=JSON.parse(localStorage.getItem("user")),n=e?e.name:null;if(!n)throw new Error("User name not found in local storage.");const t=await fetch(`${l}${n}`,{method:"GET",headers:m()});if(!t.ok)throw new Error(`HTTP error! status: ${t.status||"unknown"}`);const a=(await t.json()).data||{};p(a)}async function T(){const e=document.querySelector(".update-profile-form"),n=new FormData(e),t=Object.fromEntries(n),i={bio:t.bio,...t.avatarUrl&&{avatar:{url:t.avatarUrl,alt:t.avatarUrl}},...t.bannerUrl&&{banner:{url:t.bannerUrl,alt:t.bannerAlt}}},a=JSON.parse(localStorage.getItem("user")),r=a?a.name:null;if(!r)throw new Error("User name not found in local storage.");const o=await fetch(`${l}${r}`,{method:"PUT",headers:m(),body:JSON.stringify(i)});if(o.ok){const s=document.querySelector("#my-profile");s&&(s.innerHTML=""),await u()}if(!o.ok)throw new Error(`HTTP error! status: ${o.status||"unknown"}`)}const h=document.querySelector(".update-profile-form");function N(){h.addEventListener("submit",function(e){e.preventDefault(),T()})}u();_();N();E();f();
