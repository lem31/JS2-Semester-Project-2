import{a as f,h as g,b as h}from"./headers-DqursC6B.js";import{d as u}from"./place-BSjMR1GP.js";import{d as w,o as y}from"./notFound-C6B2C-C6.js";const S=document.getElementById("reg-form"),n=document.getElementById("error-message-reg-form"),_=document.querySelector(".sign-in-form"),c=document.getElementById("error-message-sign-in-form");async function I(d){d.preventDefault();const l=new FormData(_),e=Object.fromEntries(l),s={email:e.email,password:e.password};try{const t=await fetch(f,{method:"POST",headers:g(),body:JSON.stringify(s)});if(!t.ok)return t.json().then(m=>{const a=JSON.stringify(m).slice(22,-44);throw u(a),new Error("Failed to post bid")});if(!s.email){c.textContent="Error: Email is required";return}if(!s.password){c.textContent="Error: Password is required";return}const E=(await t.json()).data;if(t.ok){const m=E.accessToken;localStorage.setItem("accessToken",m),localStorage.setItem("user",JSON.stringify(E)),n.textContent="You have successfully signed in, you will be redirected to your profile",n.style.color="green";const a=document.createElement("div");a.className="loading-symbol",a.style.color="white",a.classList.add("loading-symbol","bg-black"),a.textContent="Loading...",document.body.appendChild(a),setTimeout(()=>{window.location.href="/profile/"},2e3)}else t.status===401?c.textContent="Error: Invalid email or password":c.textContent="Error: Something went wrong"}catch{c.textContent="Error: Unable to connect to the server"}}async function b(d){d.preventDefault();const l=new FormData(S),e=Object.fromEntries(l),s={name:e.name,email:e.emailReg,password:e.passwordReg,bio:e.bio,avatar:e.avatarUrl?{url:e.avatarUrl,alt:e.avatarAlt}:void 0,banner:e.bannerUrl?{url:e.bannerUrl,alt:e.bannerAlt}:void 0};try{const t=await fetch(h,{method:"POST",headers:g(),body:JSON.stringify(s)});if(!t.ok){const r=await t.json();throw u(JSON.stringify(r).slice(23,-44)),new Error("Failed to post bid")}if(!s.email){n.textContent="Error: Email is required";return}if(!s.password){n.textContent="Error: Password is required";return}if(s.password.length<8){n.textContent="Error: Password must be at least 8 characters long";return}if(t.ok){n.textContent="Thank you for registering, please wait",n.classList.add("text-green-500","text-center","w-[200px]");const r=document.createElement("div");r.className="loading-symbol",r.classList.add("loading-symbol"),r.textContent="Loading...",document.body.appendChild(r),setTimeout(()=>{window.location.href="/auth/"},2e3)}else t.status===400||t.status===409?n.textContent="Error: User already exists":n.textContent="Error: Something went wrong"}catch{n.textContent="Error: Unable to connect to the server"}}const R=document.getElementById("sign-in-btn-tab"),N=document.getElementById("reg-btn-tab"),i=document.getElementById("sign-in-form"),o=document.getElementById("register-form"),p=document.querySelector(".sign-in-form");function O(){i.classList.contains("hidden")&&o.classList.contains("hidden")?(i.classList.remove("hidden"),i.classList.add("flex-row-center","w-[100%]","h-[100%]"),o.classList.add("hidden")):(i.classList.add("hidden"),i.classList.remove("flex-row-center","w-[100%]","h-[100%]"))}function T(){R.addEventListener("click",O)}function L(){o.classList.contains("hidden")&&i.classList.contains("hidden")?(o.classList.remove("hidden"),o.classList.add("flex-row-center","w-[100%]","h-[100%]"),i.classList.add("hidden")):(o.classList.add("hidden"),o.classList.remove("flex-row-center","w-[100%]","h-[100%]"))}function v(){N.addEventListener("click",L)}async function x(){o.addEventListener("submit",d=>{d.preventDefault(),b(d)})}async function C(){p.addEventListener("submit",I)}T();v();x();C();w();y();
